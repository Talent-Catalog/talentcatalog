<!--
  ~ Copyright (c) 2024 Talent Catalog.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under
  ~ the terms of the GNU Affero General Public License as published by the Free
  ~ Software Foundation, either version 3 of the License, or any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License
  ~ for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see https://www.gnu.org/licenses/.
  -->

<div *ngIf="error">
  {{error}}
</div>

<tc-tabs [activeTabId]="activeTabId"
         [defaultTabId]="defaultTabId"
         (tabChanged)="onTabChanged($event)"
>
  <tc-tab *ngIf="seesAllLiveJobs()"
          [id]="'LiveJobs'"
          [description]="'Jobs associated with active opportunities which have been published on the TC'">
    <tc-tab-header>
      Live Jobs <i class="fa-solid fa-briefcase"></i>
    </tc-tab-header>
    <tc-tab-content>
      <app-jobs-with-detail
        [searchBy]="SearchOppsBy.live"
      >
      </app-jobs-with-detail>
    </tc-tab-content>
  </tc-tab>

  <tc-tab [id]="'StarredJobs'"
              [description]="'Starred jobs (eg those I am working with)'">
    <tc-tab-header>
      <i class="fas fa-star"></i>Jobs <i class="fa-solid fa-briefcase"></i>
      <app-chat-read-status
        [observable]="starredJobChatsRead$"
      ></app-chat-read-status>
    </tc-tab-header>
    <tc-tab-content>
      <app-jobs-with-detail
        [searchBy]="SearchOppsBy.starredByMe"
        [chatsRead$]="starredJobChatsRead$"
      >
      </app-jobs-with-detail>
    </tc-tab-content>
  </tc-tab>

  <tc-tab *ngIf="isJobCreator()"
              [id]="'MyJobs'"
              [description]="'Jobs created by my partner organization'">
    <tc-tab-header>
      {{loggedInPartner.abbreviation}} Jobs <i class="fa-solid fa-briefcase"></i>
      <app-chat-read-status
        [observable]="partnerJobChatsRead$"
      ></app-chat-read-status>
    </tc-tab-header>
    <tc-tab-content>
      <app-jobs-with-detail
        [searchBy]="SearchOppsBy.mineAsJobCreator"
        [chatsRead$]="partnerJobChatsRead$"
      >
      </app-jobs-with-detail>
    </tc-tab-content>
  </tc-tab>

  <tc-tab *ngIf="isJobCreator()"
          [id]="'MyCasesAsJobCreator'"
          [description]="'Candidate cases associated with jobs created by my partner organization'">
    <tc-tab-header>
      {{myCasesTabName(SearchOppsBy.mineAsJobCreator)}} <i class="fa-solid fa-address-book"></i>
      <app-chat-read-status
        [observable]="jobCreatorChatsRead$"
      ></app-chat-read-status>
    </tc-tab-header>
    <tc-tab-content>
      <app-candidate-opps-with-detail
        [searchBy]="SearchOppsBy.mineAsJobCreator"
        [chatsRead$]="jobCreatorChatsRead$"
      >
      </app-candidate-opps-with-detail>
    </tc-tab-content>
  </tc-tab>

  <tc-tab *ngIf="isSourcePartner()"
          [id]="'MyCasesAsSourcePartner'"
          [description]="'Candidate cases managed by my partner organization'">
    <tc-tab-header >
      {{myCasesTabName(SearchOppsBy.mineAsSourcePartner)}} <i class="fa-solid fa-address-book"></i>
      <app-chat-read-status
        [observable]="sourcePartnerChatsRead$"
      ></app-chat-read-status>
    </tc-tab-header>
    <tc-tab-content>
      <app-candidate-opps-with-detail
        [searchBy]="SearchOppsBy.mineAsSourcePartner"
        [chatsRead$]="sourcePartnerChatsRead$"
      >
      </app-candidate-opps-with-detail>
    </tc-tab-content>
  </tc-tab>

  <tc-tab *ngIf="isJobCreator() && !isReadOnly()"
          [id]="'NewJob'"
          [description]="'Create a new TC job'">
    <tc-tab-header>New Job <i class="fa-solid fa-briefcase"></i></tc-tab-header>
    <tc-tab-content>
      <app-new-job></app-new-job>
    </tc-tab-content>
  </tc-tab>

  <tc-tab *ngIf="isSourcePartner()"
        [id]="'MyCandidateChatsAsSourcePartner'"
        [description]="'Active chats with candidates managed by my partner organization'">
    <tc-tab-header>
      {{loggedInPartner.abbreviation}} Candidate Chats  <i class="fa-solid fa-user"></i>
      <app-chat-read-status
        [observable]="candidatesWithChatRead$"
      ></app-chat-read-status>
    </tc-tab-header>
    <tc-tab-content>
      <app-candidates-with-chat [chatsRead$]="candidatesWithChatRead$">
      </app-candidates-with-chat>
    </tc-tab-content>
  </tc-tab>
</tc-tabs>
