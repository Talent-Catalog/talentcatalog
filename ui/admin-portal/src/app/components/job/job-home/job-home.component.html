<div *ngIf="error">
  {{error}}
</div>

<nav ngbNav #nav="ngbNav" class="nav-tabs" [activeId]="activeTabId" (navChange)="onTabChanged($event)">

  <ng-container ngbNavItem="LiveJobs">
    <a ngbNavLink
       title="Jobs associated with active opportunities which have been published on the TC">
      <app-chat-read-status
        [observable]="liveJobChatsRead$"
      ></app-chat-read-status>
      Live Jobs <i class="fa-solid fa-briefcase"></i></a>
    <ng-template ngbNavContent>
      <app-jobs-with-detail
        [searchBy]="SearchOppsBy.live">
        >
      </app-jobs-with-detail>
    </ng-template>
  </ng-container>

  <ng-container ngbNavItem="StarredJobs">
    <a ngbNavLink title="Starred jobs (eg those I am working with)">
      <app-chat-read-status
        [observable]="starredJobChatsRead$"
      ></app-chat-read-status>
      <i class="fas fa-star"></i>Jobs <i class="fa-solid fa-briefcase"></i></a>
    <ng-template ngbNavContent>
      <app-jobs-with-detail
        [searchBy]="SearchOppsBy.starredByMe">
        >
      </app-jobs-with-detail>
    </ng-template>
  </ng-container>

  <ng-container *ngIf="isJobCreator()" ngbNavItem="MyJobs">
    <a ngbNavLink title="Jobs created by my partner organization">
      <app-chat-read-status
        [observable]="partnerJobChatsRead$"
      ></app-chat-read-status>
      {{loggedInPartner.abbreviation}} Jobs <i class="fa-solid fa-briefcase"></i></a>
    <ng-template ngbNavContent>
      <app-jobs-with-detail
        [searchBy]="SearchOppsBy.mineAsJobCreator">
        >
      </app-jobs-with-detail>
    </ng-template>
  </ng-container>

  <ng-container *ngIf="isJobCreator()" ngbNavItem="MyCasesAsJobCreator">
    <a ngbNavLink title="Candidate cases associated with jobs created by my partner organization">
      <app-chat-read-status
        [observable]="jobCreatorChatsRead$"
      ></app-chat-read-status>
      {{myCasesTabName(SearchOppsBy.mineAsJobCreator)}} <i class="fa-solid fa-address-book"></i></a>
    <ng-template ngbNavContent>
      <app-candidate-opps-with-detail
        [searchBy]="SearchOppsBy.mineAsJobCreator"
        [chatsRead$]="jobCreatorChatsRead$"
      >
      </app-candidate-opps-with-detail>
    </ng-template>
  </ng-container>

  <ng-container *ngIf="isSourcePartner()" ngbNavItem="MyCasesAsSourcePartner">
    <a ngbNavLink title="Candidate cases managed by my partner organization">
      <app-chat-read-status
        [observable]="sourcePartnerChatsRead$"
      ></app-chat-read-status>
      {{myCasesTabName(SearchOppsBy.mineAsSourcePartner)}} <i class="fa-solid fa-address-book"></i></a>
    <ng-template ngbNavContent>
      <app-candidate-opps-with-detail
        [searchBy]="SearchOppsBy.mineAsSourcePartner"
        [chatsRead$]="sourcePartnerChatsRead$"
      >
      </app-candidate-opps-with-detail>
    </ng-template>
  </ng-container>

  <ng-container *ngIf="isJobCreator()" ngbNavItem="NewJob">
    <a ngbNavLink title="Create a new TC job">New Job <i class="fa-solid fa-briefcase"></i></a>
    <ng-template ngbNavContent>
      <app-new-job></app-new-job>
    </ng-template>
  </ng-container>

</nav>
<div [ngbNavOutlet]="nav" class="mt-2"></div>
