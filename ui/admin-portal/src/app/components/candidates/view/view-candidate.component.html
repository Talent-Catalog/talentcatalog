<div *ngIf="loading">
  <i class="fas fa-spinner fa-spin"></i> loading...
</div>
<div class="alert alert-danger" *ngIf="error">
  {{error}}
</div>
<div *ngIf="!loading && !loadingError">

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a [routerLink]="['/candidates']">Candidates</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{candidate.user.firstName}}</li>
    </ol>
  </nav>

  <div>
    <div class="pull-right">
      <div class="input-group">
        <input type="text" class="form-control" id="status" title="{{candidate.candidateMessage}}"
               value="{{candidate.status | titlecase}}" disabled>
        <div class="input-group-append">
          <button class="btn btn-outline-dark" (click)="editCandidate()"><i class="fas fa-edit"></i></button>
        </div>
      </div>
    </div>
    <h1>{{candidate.user.firstName}} {{candidate.user.lastName}}
      <span class="small text-muted">
        {{candidate.candidateNumber}} -
          <a target="_blank" [routerLink]="['/candidates',candidate.id]">
            <i class="fas fa-external-link-alt" title="Show candidate in new tab"></i>
          </a>
          <a *ngIf="candidate.sflink" [href]="candidate.sflink" target="_blank">
            <i class="fab fa-salesforce" title="Show candidate in Salesforce"></i>
          </a>
          <a *ngIf="candidate.folderlink" [href]="candidate.folderlink" target="_blank">
            <i class="fab fa-google-drive" title="Show candidate's Google Doc folder"></i>
          </a>
          <a *ngIf="candidate.videolink" [href]="candidate.videolink" target="_blank">
            <i class="fas fa-video" title="Show candidate's one way video"></i>
          </a>
      </span>
    </h1>

  </div>

  <div class="row">
    <div class="col-sm-{{mainColWidth}}">
      <!-- TABS -->
      <ngb-tabset>

        <!-- GENERAL -->
        <ngb-tab [title]="'General'">
          <ng-template ngbTabContent>
            <app-candidate-general-tab
              [candidate]="candidate"
              [editable]="true">
            </app-candidate-general-tab>
          </ng-template>
        </ngb-tab>

        <!-- EXPERIENCE -->
        <ngb-tab [title]="'Experience'">
          <ng-template ngbTabContent>
            <app-candidate-experience-tab
              [candidate]="candidate"
              [editable]="true">
              >
            </app-candidate-experience-tab>
          </ng-template>
        </ngb-tab>

        <!-- Education -->
        <ngb-tab [title]="'Education'">
          <ng-template ngbTabContent>
            <app-candidate-education-tab
              [candidate]="candidate"
              [editable]="true">
              >
            </app-candidate-education-tab>
          </ng-template>
        </ngb-tab>

        <!-- Additional Info -->
        <ngb-tab [title]="'Additional Info'">
          <ng-template ngbTabContent>
            <app-candidate-additional-info-tab
              [candidate]="candidate"
              [editable]="true">
              >
            </app-candidate-additional-info-tab>
          </ng-template>
        </ngb-tab>

      </ngb-tabset>
    </div>
    <div class="col-sm-{{sidePanelColWidth}} admin-panel">
      <div class="w-100">
        <div class="pull-right">
          <button class="btn btn-sm btn-outline-secondary" (click)="resizeSidePanel()"><i
            class="fas fa-arrow-{{sidePanelColWidth == 8 ? 'right' : 'left'}}"></i></button>
        </div>

        <ngb-tabset>

          <!--         HISTORY -->
          <ngb-tab [title]="'History'">
            <ng-template ngbTabContent>
              <app-candidate-history-tab
                [candidate]="candidate"
                [characterLimit]="1000"
                [editable]="true"
                (onResize)="resizeSidePanel()">
              </app-candidate-history-tab>
            </ng-template>
          </ngb-tab>

          <!--         HISTORY -->
<!--          <ngb-tab [title]="'Audit'">-->
            <!--          <ng-template ngbTabContent>-->
            <!--            <app-candidate-eligibility-tab></app-candidate-eligibility-tab>-->
            <!--          </ng-template>-->
<!--          </ngb-tab>-->

        </ngb-tabset>
      </div>
    </div>
  </div>


</div>
