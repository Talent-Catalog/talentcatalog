<!--
  ~ Copyright (c) 2024 Talent Catalog.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under
  ~ the terms of the GNU Affero General Public License as published by the Free
  ~ Software Foundation, either version 3 of the License, or any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License
  ~ for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see https://www.gnu.org/licenses/.
  -->

<tc-alert type="danger" *ngIf="error">
  <div><strong>{{error}}</strong></div>
</tc-alert>

<div class="d-flex h6 font-weight-normal mb-0">
  <div class="font-15 me-2 mb-2">Selected Shareable Attachments <span *ngIf="isList">(for list)</span></div>
  <span *ngIf="saving">
    <i class="fas fa-spinner fa-spin"></i>
  </span>
</div>
<div *ngIf="candidateSource" class="text-muted mb-3">If left blank, the candidate's default selected shareable documents will be used (if present).</div>

<form [formGroup]="form" *ngIf="!saving && candidate">
  <div  class="flex-wrap justify-content-around" [appReadOnlyInputs]="!isEditable()">

    <div class="d-flex align-items-baseline" style="min-width: 300px;">
      <tc-label class="me-3 flex-shrink-0 d-flex align-items-center" style="height: 38px;">
        <i class="far fa-star fa-sm me-2"></i>CV
      </tc-label>

      <tc-field class="flex-grow-1">
        <ng-select id="shareableCvId"
                   [formControlName]="'shareableCvAttachmentId'"
                   [items]="cvs"
                   placeholder="Select"
                   bindValue="id"
                   bindLabel="name"
                   class="tc-select w-100">
          <ng-template ng-option-tmp let-item="item">
            <span [ngbTooltip]="item?.name" container="body">{{ item?.name }}</span>
          </ng-template>
        </ng-select>
      </tc-field>
    </div>
    <div *ngIf="candidateSource && candidate.shareableCv" class="d-flex">
      <p class="me-2">Default CV: </p>
      <span class="text-muted">{{candidate.shareableCv.name}}</span>
    </div>

    <div class="d-flex mt-4 align-items-baseline" style="min-width: 300px;">
      <tc-label class="me-3 flex-shrink-0 d-flex align-items-center" style="height: 38px;">
        <i class="far fa-star fa-sm me-2"></i>Other
      </tc-label>

      <tc-field class="flex-grow-1">
        <ng-select id="shareableDocId"
                   [formControlName]="'shareableDocAttachmentId'"
                   [items]="other"
                   placeholder="Select"
                   bindValue="id"
                   bindLabel="name"
                   class="tc-select w-100">
          <ng-template ng-option-tmp let-item="item">
            <span [ngbTooltip]="item?.name" container="body">{{ item?.name }}</span>
          </ng-template>
        </ng-select>
      </tc-field>
    </div>
    <div *ngIf="candidateSource && candidate.shareableDoc" class="d-flex">
      <p class="me-2">Default Doc: </p>
      <span class="text-muted">{{candidate.shareableDoc.name}}</span>
    </div>
  </div>
</form>
