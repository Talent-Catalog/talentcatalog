<!--
  ~ Copyright (c) 2024 Talent Catalog.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under
  ~ the terms of the GNU Affero General Public License as published by the Free
  ~ Software Foundation, either version 3 of the License, or any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License
  ~ for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see https://www.gnu.org/licenses/.
  -->

<div *ngIf="!hasJobChecks">
  <p class="paragraph-sm text-color-caption text-center my-3">
    No job checks added. If candidate has job opportunities click the Add Job button.
  </p>
</div>

<div class="justify-content-end">
  <tc-button *ngIf="isEditable()"
             [disabled]="!hasJobOpps"
             class="float-end mb-3"
             size="sm"
             (onClick)="addJob()"
  >
    <i class="fas fa-plus"></i>
    Add Job
  </tc-button>
</div>

<div class="row" *ngIf="hasJobChecks">
  <form [formGroup]="form">
    <div class="d-flex flex-column">
      <div *ngFor="let visaJob of visaCheckRecord?.candidateVisaJobChecks; let i = index;"
           class="my-1 mx-3"
      >
        <div>
          <tc-radio [value]="i"
                    name="jobIndex"
                    [id]="'radioJob'+i"
                    [label]="visaJob?.jobOpp?.name"
                    [formControlName]="'jobIndex'"
                    (change)="fetchUpdatedSelectedJob(visaJob)"
          >
            <tc-icon [type]="'link'"
                     *ngIf="visaJob?.jobOpp"
                     [routerLink]="visaJob?.jobOpp ? ['/job',visaJob.jobOpp.id] : null"
                     [color]="'secondary'"
            >
              <i class="fa-solid fa-briefcase" title="Open job in new tab"></i>
            </tc-icon>

            <tc-icon [type]="'link'"
                     *ngIf="fetchCandidateOppIdForJob(visaJob?.jobOpp?.id)"
                     [routerLink]="visaJob?.jobOpp ? ['/opp', fetchCandidateOppIdForJob(visaJob?.jobOpp?.id)] : null"
                     [color]="'secondary'"
            >
              <i class="fa-solid fa-address-book" title="Open case in new tab"></i>
            </tc-icon>

            <tc-icon [type]="'button'"
                     [color]="'gray'"
                     *ngIf="canDeleteVisaJob() && isEditable()"
                     (click)="deleteJob(i)"
                     class="ms-3"
            >
              <i class="fas fa-trash"></i>
            </tc-icon>

          </tc-radio>
        </div>
      </div>
    </div>
  </form>
</div>
