<!--
  ~ Copyright (c) 2021 Talent Beyond Boundaries.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under
  ~ the terms of the GNU Affero General Public License as published by the Free
  ~ Software Foundation, either version 3 of the License, or any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License
  ~ for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see https://www.gnu.org/licenses/.
  -->

<div *ngIf="loading">
      <i class="fas fa-spinner fa-spin"></i> loading...
</div>
<div *ngIf="error">
  {{error}}
</div>

<div *ngIf="!loading" id="FullIntakeForm">
  <div class="d-flex justify-content-between mb-2 ml-2">
    <div class="d-flex flex-column">
      <button class="btn btn-sm btn-primary mb-3" (click)="exportAsPdf('FullIntakeForm')" [disabled]="saving">
        <i *ngIf="saving" class="fas fa-spinner fa-spin" ></i>
        Export PDF
      </button>
      <h5>Full Intake</h5>
    </div>
    <div class="d-flex align-items-end flex-column justify-content-between">
      <div class="d-flex float-right">
        <button class="btn btn-sm btn-outline-success mr-1" (click)="createIntakeNote('Full Intake', false, $event.target)" [disabled]="saving">
          Start Intake
        </button>
        <button class="btn btn-sm btn-outline-secondary ml-1" (click)="createIntakeNote('Full Intake', true, $event.target)" [disabled]="saving">
          Update Intake
        </button>
      </div>
      <div>
        <div class="text-muted small text-right">Before starting or updating the interview, please click appropriate button.</div>
        <div class="text-muted small text-right">This will create a note on the right to help track changes.</div>
      </div>

    </div>
  </div>

  <div class="card">
    <div class="card-header">
      Confirm General Information
    </div>
    <div class="card-body">
      <app-confirm-contact
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-confirm-contact>
    </div>
  </div>

  <hr/>

  <div class="card">
    <div class="card-header">
      Interest in International Recruitment
    </div>
    <div class="card-body">
      <app-int-recruitment
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-int-recruitment>
      <app-rural
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-rural>
    </div>
  </div>

  <hr/>

  <app-citizenships
    [candidate]="candidate"
    [candidateIntakeData]="candidateIntakeData"
    [nationalities]="nationalities">
  </app-citizenships>

  <hr/>

  <app-exams
    [candidate]="candidate"
    [candidateIntakeData]="candidateIntakeData"
  >
  </app-exams>

  <hr/>

  <div class="card">
    <div class="card-header">
      English Assessment
      <span class="small ml-2">
        Only complete if never taken IELTS or TOEFL.
      </span>
    </div>
    <div class="card-body">
      <app-lang-assessment
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-lang-assessment>
    </div>
  </div>

  <hr/>

  <div class="card">
    <div class="card-header">
      Residency and Work Status
    </div>
    <div class="card-body">
      <app-residence-status
      [candidate]="candidate"
      [candidateIntakeData]="candidateIntakeData">
      </app-residence-status>
      <app-work-permit
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-work-permit>
      <app-work-status
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-work-status>
      <app-work-abroad
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData"
        [countries]="countries">
      </app-work-abroad>
    </div>
  </div>

  <hr/>

  <div class="card">
    <div class="card-header">
      Host Country Status
    </div>
    <div class="card-body">
      <app-host-entry-year
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData"
        [countries]="countries">
      </app-host-entry-year>
      <app-host-entry-legally
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-host-entry-legally>
      <app-returned-home
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-returned-home>
      <app-home-location
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-home-location>
      <app-return-home-safe
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-return-home-safe>
      <app-left-home-reason
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-left-home-reason>
      <app-return-home-future
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-return-home-future>
      <app-resettlement-third
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-resettlement-third>
      <app-visa-reject
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-visa-reject>
      <app-host-challenges
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-host-challenges>
    </div>
  </div>

  <hr/>

  <div class="card">
    <div class="card-header">
      Registration
    </div>
    <div class="card-body">
      <div class="card-title h6">
        UNHCR
      </div>
      <app-registration-unhcr
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-registration-unhcr>
      <div class="card-title h6">
        UNRWA
      </div>
      <app-registration-unrwa
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-registration-unrwa>
    </div>
  </div>

  <hr/>

  <app-view-candidate-language
  [candidate]="candidate"
  [editable]="false">
  </app-view-candidate-language>

  <hr/>

  <app-dependants
  [candidate]="candidate"
  [candidateIntakeData]="candidateIntakeData">
  </app-dependants>

  <hr/>

  <div class="card">
    <div class="card-header">
      Partner Information
    </div>
    <div class="card-body">
      <app-marital-status
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData"
        [educationLevels]="educationLevels"
        [occupations]="occupations"
        [languageLevels]="languageLevels"
        [nationalities]="nationalities">
      </app-marital-status>
      <app-family
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-family>
    </div>
  </div>

  <hr/>

  <div class="card">
    <div class="card-header">
      Additional Eligibility
    </div>
    <div class="card-body">
      <app-crime
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-crime>
      <app-military-service
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-military-service>
      <app-conflict
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-conflict>
      <app-visa-issues
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData">
      </app-visa-issues>
      <app-driving-license
        [candidate]="candidate"
        [candidateIntakeData]="candidateIntakeData"
        [countries]="countries">
      </app-driving-license>
    </div>
  </div>

</div>
