<!--
  ~ Copyright (c) 2021 Talent Beyond Boundaries.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under
  ~ the terms of the GNU Affero General Public License as published by the Free
  ~ Software Foundation, either version 3 of the License, or any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License
  ~ for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see https://www.gnu.org/licenses/.
  -->

<div class="candidate-card" *ngIf="!!candidate">

  <ng-container>
    <app-candidate-context-note
      [candidate]="candidate"
      [candidateSource]="candidateSource"
      [sourceType]="sourceType"
      [savedSearchSelectionChange]="savedSearchSelectionChange"
    >
    </app-candidate-context-note>
  </ng-container>

  <!-- HEADER -->
  <div class="candidate-header">

    <h4>{{candidate.candidateNumber}} <small>{{candidate.status | titlecase}}</small></h4>

    <div class="btn-toolbar">
      <button class="btn btn-sm btn-outline-primary" [routerLink]="['/candidate', candidate.candidateNumber]" title="Open">
        <i class="fas fa-external-link-square-alt"></i></button>
      <button class="btn btn-sm btn-secondary" (click)="close()">x</button>
    </div>

  </div>

  <!-- NAME -->
  <h5>{{candidate.user?.firstName}} {{candidate.user?.lastName}}</h5>

  <!-- TABS -->
  <nav ngbNav #nav="ngbNav" class="nav-tabs">

    <!-- GENERAL -->
    <ng-container ngbNavItem>
      <a ngbNavLink>General</a>
      <ng-template ngbNavContent>
        <app-candidate-general-tab
          [candidate]="candidate"
          [loggedInUser]="loggedInUser"
          [editable]="false">
        </app-candidate-general-tab>
      </ng-template>
    </ng-container>

    <!-- EXPERIENCE -->
    <ng-container ngbNavItem>
      <a ngbNavLink>Experience</a>
      <ng-template ngbNavContent>
        <app-candidate-experience-tab
          [candidate]="candidate"
          [editable]="false">
        </app-candidate-experience-tab>
      </ng-template>
    </ng-container>

    <!-- EDUCATION -->
    <ng-container ngbNavItem>
      <a ngbNavLink>Education</a>
      <ng-template ngbNavContent>
        <app-candidate-education-tab
          [candidate]="candidate"
          [editable]="false">
        </app-candidate-education-tab>
      </ng-template>
    </ng-container>

    <!-- NOTES -->
    <ng-container ngbNavItem>
      <a ngbNavLink>Notes</a>
      <ng-template ngbNavContent>
        <app-candidate-history-tab
          [candidate]="candidate"
          [characterLimit]="100"
          [editable]="false">
        </app-candidate-history-tab>
      </ng-template>
    </ng-container>
  </nav>
  <div [ngbNavOutlet]="nav" class="mt-2"></div>

</div>
