<!--
  ~ Copyright (c) 2024 Talent Catalog.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under
  ~ the terms of the GNU Affero General Public License as published by the Free
  ~ Software Foundation, either version 3 of the License, or any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License
  ~ for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see https://www.gnu.org/licenses/.
  -->

<ng-container *ngIf="candidateOccupation">

  <div class="text-end" *ngIf="!preview">
    <button class="btn btn-danger btn-card" [disabled]="disabled" (click)="delete()">&times;</button>
  </div>

  <div class="mb-3">
    <label class="form-label">{{ 'REGISTRATION.OCCUPATION.LABEL.OCCUPATION' | translate }}</label>

    <ng-select *ngIf="!preview" id="occupationId" [(ngModel)]="candidateOccupation.occupationId" [clearable]="false"
               placeholder="{{ 'FORM.PLACEHOLDER.SELECTORTYPE' | translate }}">
      <ng-option *ngFor="let occupation of filteredOccupations" [value]="occupation.id">{{occupation.name}}</ng-option>
    </ng-select>

    <p class="m-0" *ngIf="preview">
      {{getOccupationName(candidateOccupation.occupation)}}
    </p>
  </div>

  <div class="mb-3 mb-0" *ngIf="candidateOccupation.occupationId == 0 && candidateOccupation.migrationOccupation">
    <label class="form-label">{{ 'REGISTRATION.OCCUPATION.LABEL.MIGRATED_OCCUPATION' | translate }}: </label>
    <span> {{candidateOccupation.migrationOccupation}}</span>
  </div>
  <div>
    <p class="text-danger" *ngIf="candidateOccupation.occupationId == 0">
      {{ 'ERROR.UNKNOWN_OCCUPATION' | translate }}
    </p>
  </div>

  <!-- YEARS OF EXPERIENCE -->
  <div class="mb-3">
    <label class="form-label">{{ 'REGISTRATION.OCCUPATION.LABEL.YEARSEXPERIENCE' | translate }}</label>

    <p class="text-muted" *ngIf="!preview">{{ 'REGISTRATION.OCCUPATION.LABEL.DISCLAIMER' | translate }}</p>
    <input type="number" min=0 class="form-control" [(ngModel)]="candidateOccupation.yearsExperience" *ngIf="!preview">

    <p class="m-0" *ngIf="preview">
      {{candidateOccupation.yearsExperience}}
    </p>
  </div>

</ng-container>
