<div class="container">

  <app-loading [loading]="loading"></app-loading>

  <ng-container *ngIf="!loading">

    <!-- ADDED LANGUAGES -->
    <div class="card" *ngFor="let language of candidateLanguages; let i = index;">

      <div class="text-right" *ngIf="!isEnglish(language.languageId)">
        <button class="btn btn-danger btn-card" (click)="deleteCandidateLanguage(i)">&times;</button>
      </div>

      <!-- WHICH LANGUAGE -->
      <div class="form-group" *ngIf="!isEnglish(language.languageId)">
        <label>{{ 'REGISTRATION.LANGUAGE.LABEL.LANGUAGE' | translate }}</label>
        <select class="form-control" [disabled]="" [(ngModel)]="language.languageId">
          <option value=""></option>
          <option *ngFor="let l of languages" [value]="l.id">{{l.name}}</option>
        </select>
      </div>

      <!-- HOW WELL DO YOU SPEAK -->
      <div class="form-group">
        <label translate dir="auto">
          {{ 'REGISTRATION.LANGUAGE.LABEL.SPEAK' | translate:{languageName: getLanguageName(language.languageId)} }}
        </label>
        <select class="form-control" [(ngModel)]="language.spokenLevelId">
          <option value=""></option>
          <option *ngFor="let l of languageLevels" [value]="l.id">{{l.name}}</option>
        </select>
      </div>

      <!-- HOW WELL DO YOU READ AND WRITE -->
      <div class="form-group">
        <label translate dir="auto" [translateParams]="{languageName: getLanguageName(language.languageId)}">
          {{ 'REGISTRATION.LANGUAGE.LABEL.WRITTEN' | translate:{languageName: getLanguageName(language.languageId)} }}
        </label>
        <select class="form-control" [(ngModel)]="language.writtenLevelId">
          <option value=""></option>
          <option *ngFor="let l of languageLevels" [value]="l.id">{{l.name}}</option>
        </select>
      </div>

    </div>

    <!-- LANGUAGE FORM -->
    <form class="card" [formGroup]="form" *ngIf="addingLanguage">

      <!-- WHICH LANGUAGE -->
      <div class="form-group" *ngIf="!isEnglish()">
        <label for="id">{{ 'REGISTRATION.LANGUAGE.LABEL.LANGUAGE' | translate }}</label>
        <select class="form-control" name="id" id="id" [disabled]="" [formControlName]="'languageId'">
          <option value=""></option>
          <option *ngFor="let l of languages" [value]="l.id">{{l.name}}</option>
        </select>
      </div>

      <ng-container *ngIf="formLanguage">

        <!-- HOW WELL DO YOU SPEAK -->
        <div class="form-group">
          <label for="spokenLevelId">
            {{ 'REGISTRATION.LANGUAGE.LABEL.SPEAK' | translate:{languageName: getLanguageName()} }}
          </label>
          <select class="form-control" name="spokenLevelId" id="spokenLevelId" [formControlName]="'spokenLevelId'">
            <option value=""></option>
            <option *ngFor="let l of languageLevels" [value]="l.id">{{l.name}}</option>
          </select>
        </div>

        <!-- HOW WELL DO YOU READ AND WRITE -->
        <div class="form-group">
          <label for="writtenLevelId">
            {{ 'REGISTRATION.LANGUAGE.LABEL.SPEAK' | translate:{languageName: getLanguageName()} }}
          </label>
          <select class="form-control" name="writtenLevelId" id="writtenLevelId" [formControlName]="'writtenLevelId'">
            <option value=""></option>
            <option *ngFor="let l of languageLevels" [value]="l.id">{{l.name}}</option>
          </select>
        </div>

      </ng-container>

    </form>

    <div class="text-center mt-4">
      <button class="btn"
              [class.btn-outline-primary]="!addingLanguage"
              [class.btn-primary]="addingLanguage"
              [disabled]="addingLanguage && form.invalid || saving || loading"
              (click)="addLanguage()">
        {{ 'REGISTRATION.LANGUAGE.BUTTON.ADD' | translate }}
      </button>
    </div>

    <app-error [error]="error"></app-error>

  </ng-container>

</div>

<app-registration-footer [disabled]="loading || saving"
                         (backClicked)="back()"
                         (nextClicked)="next()">
</app-registration-footer>
